---
title: "Knowledge C_Data_Scientist_Toolbox"
author: "Sjoerd Gnodde"
date: "26 februari 2019"
output: html_document
---

# Get help

```{r}
# ?rnorm

# help.search('rnorm')

# args('rnorm')

# rnorm
```


```{r}
con <- url("http://jhsph.edu", "r")
x <- readLines(con)
head(x)
```
## Types of data analysis
* Descriptive
* Exploratory
* Inferential
* Predictive
* Causal
* Mechanisic

## Share
* github
* figshare
* https://github.com/jtleek/datasharing

## Confounding
An external reason explains both data sets

Corrolation is not causation

## Put people into random groups

## Errors
* True positive
* True negative
* False positive
* False negative

## Quantities
* Sensitivity (P(positive test|disease))
* Specificivity (P(negative test|no disease))
* Positive predictive value (P(disease|positive test))
* Negative predictive value (P(no disease|negative test))
* Accuracy (P(Correct outcome))

## Data dredging
Too long looking for significant result


# R programming

## Programming in RGui

Set working directory:
File -> Change dir

Get working directory:
```{r}
getwd()
```

## Data types

### Vectors

```{r}
x <- c(0.5, 0.6)
x1 <- c(T,F) #True, FAlse
x2 <- c(TRUE, FALSE)
x3 <- 9:30
x4 <- vector("numeric", length = 10)
```
Mixing will end up to 1 type

```{r}
x5 <- as.character(x)
```

### List
Can be different items

```{r}
x6 <- list(1, "a", TRUE, 1.1)
```

### Matrices
Vector with a dimension

```{r}
matrix(nrow = 5, ncol = 3)
a <- 1:3
b <- 10:12
x7 <- cbind(a,b)
x8 <- rbind(a,b)
```

### Factors
Categorical data
```{r}
x9 <- factor(c("yes", "no", "yes","yes", "no"))
x9
table(x9)
unclass(x9)
attr(x9, "levels")
factor(c("yes", "no", "yes","yes", "no"), levels=c("yes", "no"))
```

### Missing Values

```{r}
lst1 <- c(1, NA, NaN)
is.na(lst1)
is.nan(lst1) # also misses what it should be
```
nan is na, but na is not necessarily nan

### Data Frames
Can store different types per column

Attribute called ```row.names```

Call with ```read.table()``` or ```read.csv()``` or ```data.frame()```

Convert to matrix with ```data.matrix()```

```{r}
x10 <- data.frame(foo = 1:4, bar = c(T, F, F, T))
x10
nrow(x10)
ncol(x10)
```

### Names attribute

```{r}
x11 <- 1:3
names(x11) <- c("foo", "bar", "norf")
x11

x12 <- list(a=1, b=2, c=3)
x12

x13 <- matrix(1:4, nrow=2, ncol=2)
dimnames(x13) <- list(c("a", "b"), c("c", "d"))
x13
```

### Reading Tabular Data

```{r}
# read.table(), read.csv() [see docstring]
# readLines()
# source()
# dget()
# load()
# unserialize()
```

### Writing data

```{r}
# write.table()
# writeLines()
# dump()
# dput()
# save()
# serialize()
```


### Large datasets
For example: first read first 100 lines, then use these classes.
```{r}
# set.comment = ""
```
2^20 bytes/mb

about twice the amount data needed to load it


```dput``` reconstructs

```dump``` slightly different


### Interfaces to the outside world

```{r}
# file -> opens a connection to a file
# gqfile -> connection to gzip
# bzfile -> connection to bzip2
# url opens webpage

# con <- file("foo.txt", "r")
# data <- read.csv(con)
# close(con)

# same as just read.csv("foo.txt")
```

### Subsetting

```[]``` subsets same class

```[[]]``` extract elements (single)

```$``` extract by name

```{r}
x13 <- c("a", "b", "c")
x13[2]
x13[2:3]
x13[x13>"a"]
x14 <- x13 > "a"
x14
```

Subsetting lists
```{r}
x15 <- list(foo=1:4, bar=0.7)
x15[1]
x15[[1]]
x15$bar
x15["bar"]
x15[["bar"]]
x15[c(1,2)]
name <- "bar"
x15[[name]]
```

Further subsetting lists
```{r}
x16 <- list(a = list(10, 11,12), b = c(3.14, 1.71))
x16[[c(1,3)]]
x16[[1]][[3]]
```

Matrices exactly as expected. First row, then column. 

```{r}
# x[1, ] # is the complete first row
```

By setting drop=False one can get a matrix back instead of a vector

Partial matching
```{r}
x17 <- list(aardvark = 1:5)
x17$a
x17[["a"]]
x17[["a", exact = FALSE]]
``` 
Removing NA values

```{r}
x18 <- c(1, 2, NA, NA, 5)
bad <- is.na(x18)
x18[!bad]

# both
# good <- complete.cases(x,y)

# remove rows with nans
# good <- complete.cases(data)
# data[good, ][1:6, ]
```

### Matrix multiplication

```*```, ```/``` element wise

```%*%``` matrix multiplication



